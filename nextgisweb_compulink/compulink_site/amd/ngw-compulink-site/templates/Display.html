<div data-dojo-type="${baseClass}"
     data-dojo-attach-point="focusNode"
     style="width: 100%; height: 100%">

    <div data-dojo-attach-point="tabContainer"
         data-dojo-type="dijit/layout/TabContainer"
         data-dojo-props="tabPosition: 'top'"
         style="width: 100%; height: 100%;">

        <!-- Незакрываемый таб для размещения карты и дерева слоев -->
        <!-- Если у таба нет иконки и он незакрываем, то плывет верстка! -->
        <div data-dojo-attach-point="mainPane" title="Карта"
             data-dojo-type="dijit/layout/ContentPane"
             data-dojo-props="closable: false, iconClass: 'iconMap'"
             style="width: 100%; height: 100%; padding: 0">

            <div id="mainContainer"
                 data-dojo-type="dijit/layout/BorderContainer"
                 data-dojo-props="gutters: false"
                 style="width: 100%; height: 100%;">

                <!-- Панель для размещения OL карты -->
                <div id="centerContainer"
                     data-dojo-type="dijit/layout/BorderContainer"
                     data-dojo-props="region: 'center'"
                     style="padding-left: 0;">

                    <!-- Тулбар над картой -->
                    <div data-dojo-attach-point="mapToolbar"
                         data-dojo-type="dijit/Toolbar"
                         data-dojo-props="region: 'top'">

                        <div style="padding: 0 4px; float: right;">

                            <div data-dojo-attach-point="itemMenu"
                                 data-dojo-type="dijit/Menu"
                                 style="display:none">
                            </div>

                            <div data-dojo-attach-point="bookmarkButton"
                                 data-dojo-type="dijit/form/DropDownButton"
                                 data-dojo-props="label: 'Закладки', iconClass: 'dijitIconBookmark'">

                                <div data-dojo-attach-point="bookmarkMenu"
                                     data-dojo-type="dijit/Menu">
                                </div>

                            </div>
                        </div>

                        <!-- Распорка по высоте -->
                        <div data-dojo-type="dijit/form/Button" style="width: 0;">&nbsp;</div>

                        <div data-dojo-attach-point="zoomToInitialExtentButton"
                             data-dojo-type="dijit/form/Button"
                             data-dojo-props="iconClass: 'iconArrowInOut', showLabel: false">
                        </div>

                        <div data-dojo-attach-point="moveToCoordinates"
                             data-dojo-type="dijit/form/DropDownButton"
                             data-dojo-props="iconClass: 'iconMoveTo', showLabel: false, title: 'Перейти к координатам'">

                            <div data-dojo-type="dijit/TooltipDialog">
                                <div data-dojo-type="dojox/layout/TableContainer" data-dojo-props="cols: 1">

                                    <div data-dojo-attach-point="moveToLat"
                                         data-dojo-type="dijit/form/NumberTextBox"
                                         data-dojo-props="constraints: {min: -180, max: +180}, trim: true"
                                         title="Широта, град."
                                         style="width: 100%">
                                    </div>

                                    <div data-dojo-attach-point="moveToLon"
                                         data-dojo-type="dijit/form/NumberTextBox"
                                         data-dojo-props="constraints: {min: -180, max: +180}, trim: true"
                                         title="Долгота, град."
                                         style="width: 100%">
                                    </div>

                                </div>

                                <div data-dojo-attach-point="moveToCoordinatesButton"
                                     data-dojo-type="dijit/form/Button"
                                     data-dojo-props="label: 'OK'">
                                </div>
                            </div>
                        </div>

                        <div data-dojo-type="dijit/ToolbarSeparator"></div>

                        <div data-dojo-attach-point="leftToolbarSwitch"
                             data-dojo-attach-event="onChange: switchLeftToolbar"
                             data-dojo-type="dijit/form/ToggleButton"
                             data-dojo-props="iconClass: 'iconLeftPanel', showLabel: false, checked: true, title: 'Скрыть\\показать левую панель'">
                        </div>

                        <div data-dojo-attach-point="bottomToolbarSwitch"
                             data-dojo-attach-event="onChange: switchBottomToolbar"
                             data-dojo-type="dijit/form/ToggleButton"
                             data-dojo-props="iconClass: 'iconBottomPanel', showLabel: false, checked: true, title: 'Скрыть\\показать нижнюю панель'">
                        </div>

                        <div data-dojo-attach-point="rightToolbarSwitch"
                             data-dojo-attach-event="onChange: switchRightToolbar"
                             data-dojo-type="dijit/form/ToggleButton"
                             data-dojo-props="iconClass: 'iconRightPanel', showLabel: false, checked: true, title: 'Скрыть\\показать правую панель'">
                        </div>

                        <div data-dojo-attach-point="rightToolbarSwitch"
                             data-dojo-attach-event="onChange: switchLegendPane"
                             data-dojo-type="dijit/form/ToggleButton"
                             data-dojo-props="iconClass: 'iconLegendPanel', showLabel: false, checked: true, title: 'Скрыть\\показать легенду'">
                        </div>

                        <div data-dojo-type="dijit/ToolbarSeparator"></div>

                        <div data-dojo-attach-point="infoNode"
                             style="display: inline-block; vertical-align: middle; float: right; padding: 0 4px;">

                            <div data-dojo-type="dijit/form/Button" style="width: 0;">&nbsp;</div>

                            <span style="color: #999">Д</span>
                            <span data-dojo-attach-point="centerLonNode"></span>

                            <span style="color: #999">Ш</span>
                            <span data-dojo-attach-point="centerLatNode"></span>

                            <span style="color: #999">М</span>
                            <span data-dojo-attach-point="scaleInfoNode"></span>
                        </div>

                        <div data-dojo-attach-point="printMapButton"
                             data-dojo-attach-event="onClick: printMap"
                             data-dojo-type="dijit/form/Button"
                             data-dojo-props="iconClass: 'iconPrintMap', showLabel: false">
                        </div>

                        <div data-dojo-type="dijit/ToolbarSeparator"></div>
                    </div>

                    <div id="mapPane" data-dojo-attach-point="mapPane"
                         data-dojo-type="dijit/layout/ContentPane"
                         data-dojo-props="region: 'center'"
                         style="width: 100%; padding: 0;">
                        <div data-dojo-attach-point="mapNode"
                             style="position: absolute; width: 100%; height: 100%; padding: 0;">

                            <div style="position: absolute; top: 0; right: 0; z-index: 2000; margin: 4px; background-color: rgba(255, 255, 255, 0.5)">
                                <a href="http://nextgis.ru/nextgis-web/" target="_blank"><img
                                        src="${ngwConfig.assetUrl}img/nextgis.png"/></a>
                            </div>
                            <a id="permalink" data-dojo-attach-event="onclick:_getPermalink" href="#"
                               style="position: absolute; bottom: 20px; right: 0; z-index: 2000; margin: 4px; font-size: smaller;">Ссылка</a>

                            <div data-dojo-attach-point="permalinkDialog" data-dojo-type="dijit/Dialog"
                                 data-dojo-props="title: 'Ссылка', autofocus: false, draggable: false"
                                 style="display: none;">
                                <div data-dojo-attach-point="permalinkContent" data-dojo-type="dijit/form/TextBox"
                                     data-dojo-props="readOnly: false, selectOnClick: true" style="width: 300px;"></div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Левая панель -->
                <div id='leftPanel'
                     data-dojo-type="dijit/layout/BorderContainer"
                     data-dojo-props="region: 'left', splitter: true, gutters: false"
                     style="width: 250px; padding: 0;">

                    <div data-dojo-type="dijit/layout/BorderContainer"
                         data-dojo-props="region: 'center'"
                         style="padding-bottom: 0; padding-right: 0">

                        <!-- Тулбар над деревом слоев -->
                        <div data-dojo-type="dijit/Toolbar"
                             data-dojo-props="region: 'top'">

                            <select data-dojo-type="dijit/form/Select" id="resourcesTypeSelector">
                                <option value="all" selected="selected">ВОЛС и Ситуационные планы</option>
                                <option value="sit">Ситуационные планы</option>
                                <option value="vols">ВОЛС</option>
                            </select>

                        </div>

                        <!-- Панель для размещения дерева ресурсов -->
                        <div data-dojo-attach-point="resourceTreePane"
                             data-dojo-type="dijit/layout/ContentPane"
                             data-dojo-props="region: 'center'"
                             style="padding: 0">
                            <div id="resourcesTree"></div>
                        </div>

                    </div>


                    <!-- Панель для размещения переключателя подложки -->
                    <div data-dojo-attach-point="basemapPane"
                         data-dojo-type="dijit/layout/ContentPane"
                         data-dojo-props="region: 'bottom', border: false"
                         style="padding-left: 5px; padding-right: 2px;">

                        <input id="pkkCheck" name="pkkCheck"
                               data-dojo-type="dijit/form/CheckBox"
                               data-dojo-attach-point="pkkCheck"
                               value="pkkEnabled"
                               chceked="false"
                               style="margin-bottom: 8px;"
                                />
                        <label for="pkkCheck" style="width: 100%; margin-bottom: 8px;">Отображать кадастровое
                            деление</label>


                        <select data-dojo-attach-point="basemapSelect"
                                data-dojo-type="dijit/form/Select"
                                style="width: 100%;">
                        </select>

                    </div>

                </div>

                <!-- Правая панель -->
                <div id='rightPanel'
                     data-resource-type-filter=""
                     data-dojo-type="dijit/layout/BorderContainer"
                     data-dojo-props="region: 'right', splitter: true, gutters: false"
                     style="width: 260px; padding: 0;">


                    <div data-dojo-type="dijit/layout/BorderContainer"
                         data-dojo-attach-point=""
                         data-dojo-props="region: 'center', gutters:true, liveSplitters:true"
                         id="rightPanelsBorderContainer"
                         style="padding-left: 0; position: relative;">

                        <!-- Панель для размещения списка типа слоев Сит плана-->
                        <div id="sitLayersPane"
                             data-dojo-attach-point="sitPlanLayersTreePane"
                             data-dojo-type="dijit/layout/ContentPane"
                             data-dojo-props="region: 'center', splitter: true"
                             data-right-panel="sit"
                             style="padding: 0;height: 30%" class="sit">
                            <div class="title">Слои Сит. плана</div>
                            <div class="tree-overlay"></div>
                            <div class="tree-wrapper">
                                <div id="spLayersTree"></div>
                            </div>
                        </div>

                        <!-- Панель для размещения списка типа слоев ВОЛС -->
                        <div id="foclLayersPane"
                             data-dojo-attach-point="foclLayersTreePane"
                             data-dojo-type="dijit/layout/ContentPane"
                             data-dojo-props="region: 'top', splitter: true"
                             data-right-panel="focl"
                             style="padding: 0;height: 15%" class="vols">
                            <div class="title">Слои ВОЛС</div>
                            <div class="tree-overlay"></div>
                            <div class="tree-wrapper">
                                <div id="foclLayersTree"></div>
                            </div>
                        </div>

                        <!-- Панель для легенды-->
                        <div id="legendPane"
                             data-dojo-type="dijit/layout/ContentPane"
                             data-dojo-props="region: 'bottom', splitter: true"
                             data-right-panel="legend"
                             style="padding: 0;height: 85%" class="leg">
                            <div class="title">Легенда</div>
                            <div class="legend_wrapper">
                                <img src="${ngwConfig.compulinkAssetUrl}img/legend.png" />
                            </div>
                        </div>
                    </div>
                </div>

                <div data-resource-type-filter=""
                     data-dojo-type="dijit/layout/BorderContainer"
                     data-dojo-props="region: 'bottom', splitter: true, gutters: false"
                     style="width: 100%; height: 150px; padding: 0;">
                    <div data-dojo-attach-point="resourcesTablePane"
                         data-dojo-type="dijit/layout/ContentPane"
                         data-dojo-props="region: 'left', splitter: true, gutters: false"
                         style="padding: 0; height: 100%; width:50%; display: inline-block; overflow: hidden;border: 1px #b5bcc7 solid;">
                        <div class="title">Выбранные объекты строительства</div>
                        <div id="resourcesTable" style="height: auto; position: absolute; display: block; top: 20px; bottom: 0; left: 0; right: 0;"></div>
                    </div>

                    <div data-dojo-attach-point="acceptedPartsPanel"
                         data-dojo-type="dijit/layout/ContentPane"
                         data-dojo-props="region: 'center', splitter: true, gutters: false"
                         style="padding: 0; height: 100%; width:49%;overflow: hidden; display: inline-block; position: absolute; right: 4px; border: 1px #b5bcc7 solid;">
                        <div class="title">Принятые участки</div>
                        <div data-dojo-attach-point="acceptedPartsToolbar"
                             data-dojo-type="dijit/Toolbar"
                             class="accepted-parts-toolbar"
                             data-dojo-props="region: 'top'">

                            <div data-dojo-type="dijit/form/Button"
                                 data-dojo-props="iconClass:'icon icon-plus', showLabel:false">Cut
                            </div>
                            <div data-dojo-type="dijit/form/ToggleButton"
                                 data-dojo-props="iconClass:'icon icon-eye', showLabel:false">Bold
                            </div>
                            <span data-dojo-type="dijit/ToolbarSeparator"></span>
                            <input data-dojo-type="dijit/form/TextBox"
                                   data-dojo-attach-point="acceptedPartsFilter"
                                   type="text"
                                   placeHolder="Фильтр"
                                   value=""/>
                        </div>
                        <div data-dojo-attach-point="acceptedPartsTable"
                             style="position: absolute; display: block; top: 46px; bottom: 0; left: 0; right: 0;height: auto;"></div>
                    </div>
                </div>
            </div>

        </div>

    </div>

</div>
